import{r as e,v as a,$ as l,k as o,m as s,z as n,Q as t,q as i,l as p,O as r,f as d,L as c,P as u,_ as m,S as g}from"./vue-vendor-C3e-Kb3Z.js";import{l as _,G as w,z as v,U as f,M as h,V as y,T as b}from"./index-Sm2rxOHe.js";import{B as V,a as x,b as k,C,T as U}from"./TopIcons-C2xlCYKa.js";import"./index-D7DSLlth.js";import"./use-route-BAW5XLj3.js";import"./index-B-_aqH77.js";import"./index-7etSgMpZ.js";const j={class:"switch-type"},S={key:0,class:"uni-input-wrapper"},L={class:"label-text"},T={key:1,class:"uni-input-wrapper"},A={class:"label-text"},q={class:"uni-input-wrapper"},z={class:"label-text"},I={class:"uni-input-wrapper"},O={class:"label-text"},P={class:"uni-input-wrapper"},B={class:"label-text"},D={class:"uni-input-wrapper"},G={class:"label-text"},M={class:"form_btn"},Q={class:"regLink"},R={class:"regTip"},$={__name:"Signup",setup($){const{t:E}=_.global,F=t(),H=l(),J=e(!1),K=e("AC +1"),N=e(!1),W=w(),X=a({ac_type:1,email:"",phone:"",country_code:"1",password:"",password2:"",tranpass:"",invite:H.query.code}),Y=e=>{X.ac_type=e,1===e?X.email="":X.phone=""},Z=()=>{N.value=!0};function ee(e){K.value=e.abbreviation+" +"+e.code,X.country_code=e.code}const ae=async()=>{try{const e=await y({});if(1===e?.code&&Array.isArray(e?.data)&&e.data.length>0){const a=e.data[0]?.url;a?b(a):v(E("common.get_download_link_failed")||"获取下载链接失败")}else v(e?.msg||E("common.get_download_link_failed")||"获取下载链接失败")}catch(e){v(e?.msg||E("common.get_download_link_failed")||"获取下载链接失败")}},le=()=>{if(1===X.ac_type){if(!X.phone)return v(E("login.mobile_tip")),!1}else if(!X.email)return v(E("login.email_tip")),!1;if(!X.password)return v(E("login.password_tip")),!1;if(!X.password2)return v(E("login.cpassword_tip")),!1;if(!X.tranpass)return v(E("serverCodes.820")),!1;if(!X.invite)return v(E("login.invite_tip")),!1;if(X.password!=X.password2)return v(E("serverCodes.803")),!1;const e={ac_type:X.ac_type,password:X.password,password2:X.password2,tranpass:X.tranpass,invite:X.invite||""};1===X.ac_type?(e.phone=X.phone?X.phone.trim():"",e.country_code=X.country_code||"",e.email=""):(e.email=X.email?X.email.trim():"",e.phone="",e.country_code=""),J.value=!0,f(e).then(e=>{J.value=!1,h(e.msg),W.login(e.data.userInfo,e.data.token),F.push("/")}).catch(e=>{J.value=!1,v(e.msg)})};return(e,a)=>{const l=i("RouterLink");return p(),o(V,{title:n(E)("login.signuptext"),subtitle:n(E)("login.signuptext"),desc:"Create an account to access more content"},{top:s(()=>[d(U,{onServer:a[0]||(a[0]=e=>n(F).push("/customer-service")),onLang:a[1]||(a[1]=e=>n(F).push("/lang")),onDownload:ae})]),default:s(()=>[r("div",j,[1===X.ac_type?(p(),c("span",{key:0,onClick:a[2]||(a[2]=e=>Y(2))},u(n(E)("login.signupemail")||"邮箱注册"),1)):(p(),c("span",{key:1,onClick:a[3]||(a[3]=e=>Y(1))},u(n(E)("login.signupmobile")||"手机号注册"),1))]),r("form",{class:"login-form",autocomplete:"off",onSubmit:m(le,["prevent"])},[1===X.ac_type?(p(),c("div",S,[r("label",L,u(n(E)("login.mobile")),1),d(x,{modelValue:X.phone,"onUpdate:modelValue":a[4]||(a[4]=e=>X.phone=e),placeholder:n(E)("login.mobile_tip"),prefix:K.value,"prefix-clickable":!0,onPrefixClick:Z},null,8,["modelValue","placeholder","prefix"])])):(p(),c("div",T,[r("label",A,u(n(E)("login.email")),1),d(x,{modelValue:X.email,"onUpdate:modelValue":a[5]||(a[5]=e=>X.email=e),placeholder:n(E)("login.email_tip")},null,8,["modelValue","placeholder"])])),r("div",q,[r("label",z,u(n(E)("login.password")),1),d(x,{modelValue:X.password,"onUpdate:modelValue":a[6]||(a[6]=e=>X.password=e),type:"password",autocomplete:"off",placeholder:n(E)("login.password_tip")},null,8,["modelValue","placeholder"])]),r("div",I,[r("label",O,u(n(E)("login.cpassword")),1),d(x,{modelValue:X.password2,"onUpdate:modelValue":a[7]||(a[7]=e=>X.password2=e),type:"password",autocomplete:"off",placeholder:n(E)("login.password_tip")},null,8,["modelValue","placeholder"])]),r("div",P,[r("label",B,u(n(E)("login.tranpass")),1),d(x,{modelValue:X.tranpass,"onUpdate:modelValue":a[8]||(a[8]=e=>X.tranpass=e),placeholder:n(E)("login.tranpass_tip")},null,8,["modelValue","placeholder"])]),r("div",D,[r("label",G,u(n(E)("login.invite")),1),d(x,{modelValue:X.invite,"onUpdate:modelValue":a[9]||(a[9]=e=>X.invite=e),placeholder:n(E)("login.invite_tip")},null,8,["modelValue","placeholder"])]),r("div",M,[d(k,{"native-type":"submit"},{default:s(()=>[g(u(n(E)("login.signup")),1)]),_:1})]),r("div",Q,[r("span",R,u(n(E)("login.have")),1),d(l,{to:"/login"},{default:s(()=>[g(u(n(E)("login.login_now")),1)]),_:1})])],32),d(C,{show:N.value,"onUpdate:show":a[10]||(a[10]=e=>N.value=e),code:X.country_code,onOnCountrySelect:ee},null,8,["show","code"])]),_:1},8,["title","subtitle"])}}};export{$ as default};
