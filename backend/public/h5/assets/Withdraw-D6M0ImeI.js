import{_ as a,l as e,A as s,q as t,F as r,J as i,z as l,Q as d,y as c}from"./index-Sm2rxOHe.js";import{B as n}from"./index-7etSgMpZ.js";import{v as o,w,r as u,o as p,L as m,O as _,f as h,P as v,z as f,G as b,Z as y,N as g,m as x,Q as C,l as F,S as I}from"./vue-vendor-C3e-Kb3Z.js";import"./use-route-BAW5XLj3.js";const k={class:"page-wrapper"},U={class:"page-wrapper-body"},j={class:"page-wrapper-header"},S={class:"title"},$={class:"withdraw"},z={class:"balance-card"},D={class:"label"},T={class:"value"},V={class:"section"},q={class:"form-group"},Q={class:"label-text"},R={class:"form-control"},A=["placeholder"],B={class:"form-group"},E={class:"label-text"},G={class:"form-control"},J={class:"hint"},L={class:"net-switch"},N={class:"label"},O={class:"chips"},P={class:"summary-bar"},W={class:"summary-item"},Z={class:"s-label"},H={class:"s-value"},K={class:"summary-item"},M={class:"s-label"},X={class:"s-value"},Y={class:"summary-item"},aa={class:"s-label"},ea={class:"s-value"},sa={class:"form-group"},ta={class:"label-text"},ra={class:"form-control"},ia=["placeholder"],la={class:"btns"},da={class:"tips"},ca={class:"tit"},na=a({__name:"Withdraw",setup(a){const na=C(),{t:oa}=e.global,wa=o({loading:!1,address_withdraw:"",erc_fee:0,trc_fee:0,amount:"",security:"",ac_type:1,withdraw_fee:0,withdraw_min:1,withdraw_max:1,total_amount:0,userInfo:{balance:0}});w(()=>wa.amount,a=>{2==wa.ac_type?wa.withdraw_fee=wa.erc_fee/100:wa.withdraw_fee=wa.trc_fee/100;let e=parseFloat(a);e>0&&(wa.withdraw_fee=(e*wa.withdraw_fee).toFixed(2),wa.total_amount=(e-wa.withdraw_fee).toFixed(2))}),w(()=>wa.ac_type,a=>{wa.withdraw_fee=2==a?wa.erc_fee/100:wa.trc_fee/100,parseFloat(wa.amount)>0&&(wa.withdraw_fee=(parseFloat(wa.amount)*wa.withdraw_fee).toFixed(2),wa.total_amount=(parseFloat(wa.amount)-wa.withdraw_fee).toFixed(2))}),u(!1);const ua=()=>{i().then(a=>{wa.userInfo=a.data,wa.address_withdraw=a.data.address_withdraw,wa.erc_fee=100*a.data.withdraw_erc_fee,wa.trc_fee=100*a.data.withdraw_trc_fee,wa.withdraw_min=parseInt(a.data.withdraw_min),wa.withdraw_max=parseInt(a.data.withdraw_max)}).catch(a=>{})},pa=()=>{let a=parseFloat(wa.userInfo.balance),e=parseFloat(wa.amount);if(!e)return l(oa("serverCodes.817")),!1;if(e>a)return l(oa("serverCodes.819")),!1;if(e<wa.withdraw_min)return l(oa("serverCodes.822")),!1;if(e>wa.withdraw_max)return l(oa("serverCodes.823")),!1;if(!wa.security)return l(oa("serverCodes.828")),!1;let s={amount:e,address:wa.address_withdraw,ac_type:wa.ac_type,security:wa.security};wa.loading=!0,d(s).then(a=>{c(a.msg),wa.amount=0,wa.security="",ua(),wa.loading=!1,na.push("/user")}).catch(a=>{wa.loading=!1,l({message:a.msg,duration:5e3})})};return p(()=>{ua()}),(a,e)=>{const i=s,l=n;return F(),m("div",k,[e[9]||(e[9]=_("div",{class:"page-bg"},null,-1)),e[10]||(e[10]=_("div",{class:"page-mask"},null,-1)),_("div",U,[_("section",j,[h(i,{name:"arrow-left",class:"icon-box",size:"18",onClick:e[0]||(e[0]=a=>{na.push("/user")})}),_("div",S,[_("span",null,v(f(oa)("mine.withdraw")),1)])]),_("article",$,[_("div",z,[_("div",D,v(f(oa)("mine.available"))+" (USD)",1),_("div",T,v(f(t)(wa.userInfo.balance)),1)]),_("div",V,[_("div",q,[_("div",Q,v(f(oa)("withdraw.address")),1),_("div",R,[b(_("input",{class:"base-input",type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>wa.address_withdraw=a),placeholder:f(oa)("mine.enter_address"),readonly:""},null,8,A),[[y,wa.address_withdraw]])])]),_("div",B,[_("div",E,v(f(oa)("withdraw.quantity")),1),_("div",G,[b(_("input",{class:"base-input",type:"number",inputmode:"decimal",step:"0.01","onUpdate:modelValue":e[2]||(e[2]=a=>wa.amount=a),placeholder:"0.00"},null,512),[[y,wa.amount]])]),_("div",J,v(f(oa)("withdraw.amount"))+" · "+v(f(oa)("mine.available"))+" $"+v(f(t)(wa.userInfo.balance)),1)]),_("div",L,[_("span",N,v(f(oa)("withdraw.current")),1),_("div",O,[_("button",{class:g({active:1===wa.ac_type}),onClick:e[3]||(e[3]=a=>wa.ac_type=1)},"USDT-ERC20",2),_("button",{class:g({active:2===wa.ac_type}),onClick:e[4]||(e[4]=a=>wa.ac_type=2)},"USDT-TRC20",2)])]),_("div",P,[_("div",W,[_("div",Z,v(f(oa)("withdraw.amount")),1),_("div",H,"$"+v(wa.amount||"0.00"),1)]),e[6]||(e[6]=_("div",{class:"divider"},null,-1)),_("div",K,[_("div",M,v(f(oa)("withdraw.fee")),1),_("div",X,"$"+v(wa.withdraw_fee||"0.00"),1)]),e[7]||(e[7]=_("div",{class:"divider"},null,-1)),_("div",Y,[_("div",aa,v(f(oa)("withdraw.total")),1),_("div",ea,"$"+v(wa.total_amount||"0.00"),1)])]),_("div",sa,[_("div",ta,v(f(oa)("withdraw.pin")),1),_("div",ra,[b(_("input",{class:"base-input",type:"password","onUpdate:modelValue":e[5]||(e[5]=a=>wa.security=a),placeholder:f(oa)("withdraw.pin_tip")},null,8,ia),[[y,wa.security]])])]),_("div",la,[h(l,{class:"btn",type:"theme",block:"",loading:wa.loading,onClick:pa},{default:x(()=>[I(v(f(oa)("withdraw.submit")),1)]),_:1},8,["loading"])]),_("div",da,[_("span",ca,v(2===wa.ac_type?f(oa)("withdraw.erc_fee",{fee:wa.erc_fee}):f(oa)("withdraw.trc_fee",{fee:wa.trc_fee})),1),_("p",null,v(f(oa)("recharge.alarm_desc")),1),_("p",null,v(f(oa)("recharge.alarm_desc2")),1),_("p",null,v(f(oa)("withdraw.amount"))+" ≥ "+v(wa.withdraw_min)+" ，≤ "+v(wa.withdraw_max),1)])])]),e[8]||(e[8]=_("div",{class:"ft-h"},null,-1)),h(r,{active:"user"})])])}}},[["__scopeId","data-v-a1a4e180"]]);export{na as default};
