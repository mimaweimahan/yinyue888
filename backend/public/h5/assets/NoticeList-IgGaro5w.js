import{_ as e,l as a,A as s,as as i,z as t,L as l}from"./index-Sm2rxOHe.js";import{B as n}from"./index-7etSgMpZ.js";import{r as o,o as r,L as c,O as d,f as m,P as p,z as v,k as u,m as g,F as y,M as f,Q as _,l as k,S as b}from"./vue-vendor-C3e-Kb3Z.js";import"./use-route-BAW5XLj3.js";const w={class:"page-wrapper"},x={class:"page-wrapper-body"},h={class:"page-wrapper-header"},z={class:"title"},j={class:"content-section"},N={key:1,class:"error-box"},O={class:"error-content"},A={class:"error-message"},C={key:2,class:"empty-box"},L={key:3,class:"notice-list"},P=["onClick"],S={class:"notice-item-main"},$={class:"notice-item-title"},J={class:"notice-item-arrow"},I=e(Object.assign({name:"NoticeListPage"},{__name:"NoticeList",setup(e){const{t:I}=a.global,T=_(),q=o([]),B=o(!1),E=o(""),F=async()=>{B.value=!0,E.value="";try{const e=await i({limit:100});if(1===e?.code&&Array.isArray(e?.data))q.value=e.data;else{const a=e?.msg||JSON.stringify(e,null,2)||I("common.get_notice_list_failed")||"获取公告失败";E.value=`API 返回错误: ${a}`}}catch(e){let a="";a=e?.response?.data?`HTTP ${e.response.status||"Error"}: ${JSON.stringify(e.response.data,null,2)}`:e?.msg?e.msg:e?.message?e.message:JSON.stringify(e,null,2),E.value=`请求失败: ${a}`,t(I("common.get_notice_list_failed")||"获取公告列表失败")}finally{B.value=!1}},H=()=>{T.back()};return r(()=>{F()}),(e,a)=>{const i=s,t=l,o=n;return k(),c("div",w,[a[1]||(a[1]=d("div",{class:"page-bg"},null,-1)),a[2]||(a[2]=d("div",{class:"page-mask"},null,-1)),d("div",x,[d("div",h,[d("div",{class:"icon-box",onClick:H},[m(i,{name:"arrow-left",size:"20"})]),d("div",z,p(v(I)("notice.title")||"公告列表"),1)]),d("div",j,[B.value?(k(),u(t,{key:0,type:"spinner",vertical:"",class:"loading-box"},{default:g(()=>[b(p(v(I)("notice.loading")||"加载中..."),1)]),_:1})):E.value?(k(),c("div",N,[m(i,{name:"warning-o",size:"40"}),d("div",O,[a[0]||(a[0]=d("p",{class:"error-title"},"错误详情（供调试使用）：",-1)),d("pre",A,p((r=E.value,r||"未知错误")),1)]),m(o,{type:"primary",size:"small",onClick:F},{default:g(()=>[b(p(v(I)("notice.retry")||"重试"),1)]),_:1})])):0===q.value.length?(k(),c("div",C,[m(i,{name:"info-o",size:"40"}),d("p",null,p(v(I)("notice.empty")||"暂无公告"),1)])):(k(),c("div",L,[(k(!0),c(y,null,f(q.value,e=>(k(),c("div",{key:e.id,class:"notice-item",onClick:a=>(e=>{T.push({path:"/notice-detail",query:{id:e.id}})})(e)},[d("div",S,[d("h3",$,p(e.title),1)]),d("div",J,[m(i,{name:"arrow"})])],8,P))),128))]))])])]);var r}}}),[["__scopeId","data-v-0273f63e"]]);export{I as default};
