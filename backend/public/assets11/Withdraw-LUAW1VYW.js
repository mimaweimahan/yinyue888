import{_ as g,i as C,j as V,w as p,r as F,o as k,c as w,d as e,m as _,q as h,t as o,G as i,J as v,p as I,N as U,E as S,D as l,V as $,C as D,b as u,v as E}from"./index-4tvR8j1Z.js";const N={class:"page-wrapper"},T={class:"page-wrapper-body"},B={class:"page-wrapper-header"},R={class:"title"},q={class:"withdraw_items"},z={class:"ac_wallets"},M={class:"av"},W={class:"wallet_total"},j={class:"amount_box"},A={class:"amount"},G={class:"withdraw_items"},J={class:"withdraw_confirm"},O={class:"form-group"},H={class:"label-text"},K={class:"form-control"},L={class:"form-group"},P={class:"label-text"},Q={class:"form-control"},X={class:"withdraw_box"},Y={class:"box"},Z={class:"start"},tt={class:"end"},et={class:"box"},st={class:"start"},at={class:"end"},ot={class:"box"},dt={class:"start"},it={class:"end"},nt={class:"box"},rt={class:"start"},lt={class:"end"},_t={class:"withdraw_form"},ct={class:"form-group"},wt={class:"label-text"},ht={class:"form-control"},ut={class:"form_btn"},mt={class:"withdraw_desc"},ft={key:0,class:"title"},pt={key:1,class:"title"},vt={__name:"Withdraw",setup(yt){const m=S(),{t:a}=C.global,t=V({loading:!1,address_withdraw:"",erc_fee:0,trc_fee:0,amount:"",security:"",ac_type:1,withdraw_fee:0,withdraw_min:1,withdraw_max:1,total_amount:0,userInfo:{balance:0}});p(()=>t.amount,d=>{t.ac_type==2?t.withdraw_fee=t.erc_fee/100:t.withdraw_fee=t.trc_fee/100;let s=parseFloat(d);s>0&&(t.withdraw_fee=(s*t.withdraw_fee).toFixed(2),t.total_amount=(s-t.withdraw_fee).toFixed(2))}),p(()=>t.ac_type,d=>{d==2?t.withdraw_fee=t.erc_fee/100:t.withdraw_fee=t.trc_fee/100,parseFloat(t.amount)>0&&(t.withdraw_fee=(parseFloat(t.amount)*t.withdraw_fee).toFixed(2),t.total_amount=(parseFloat(t.amount)-t.withdraw_fee).toFixed(2))}),F(!1);const f=()=>{U().then(d=>{t.userInfo=d.data,t.address_withdraw=d.data.address_withdraw,t.erc_fee=d.data.withdraw_erc_fee*100,t.trc_fee=d.data.withdraw_trc_fee*100,t.withdraw_min=parseInt(d.data.withdraw_min),t.withdraw_max=parseInt(d.data.withdraw_max)}).catch(d=>{console.log(d)})},y=()=>{m.push("/user")},b=()=>{let d=parseFloat(t.userInfo.balance),s=parseFloat(t.amount);if(!s)return l(a("serverCodes.817")),!1;if(s>d)return l(a("serverCodes.819")),!1;if(s<t.withdraw_min)return l(a("serverCodes.822")),!1;if(s>t.withdraw_max)return l(a("serverCodes.823")),!1;if(!t.security)return l(a("serverCodes.828")),!1;let c={amount:s,address:t.address_withdraw,ac_type:t.ac_type,security:t.security};t.loading=!0,$(c).then(r=>{D(r.msg),t.amount=0,t.security="",f(),t.loading=!1,m.push("/user")}).catch(r=>{t.loading=!1,l({message:r.msg,duration:5e3})})};return k(()=>{f()}),(d,s)=>{const c=h("van-icon"),r=h("van-field"),x=h("van-button");return u(),w("div",N,[e("div",T,[e("view",B,[_(c,{name:"arrow-left",class:"icon-box",size:"18",onClick:s[0]||(s[0]=n=>y())}),e("div",R,[e("span",null,o(i(a)("mine.withdraw")),1)])]),e("div",q,[e("div",z,[e("div",M,o(i(a)("mine.available")),1),e("div",W,[e("div",j,[s[7]||(s[7]=e("span",{click:"amount_unit"},"$",-1)),e("span",A,o(t.userInfo.balance),1)])])])]),e("div",G,[e("div",J,[e("div",O,[e("div",H,o(i(a)("withdraw.address")),1),e("div",K,[_(r,{class:"account",modelValue:t.address_withdraw,"onUpdate:modelValue":s[1]||(s[1]=n=>t.address_withdraw=n),readonly:"true",placeholder:i(a)("mine.enter_address")},null,8,["modelValue","placeholder"])])]),e("div",L,[e("div",P,o(i(a)("withdraw.quantity")),1),e("div",Q,[_(r,{type:"number",class:"account",modelValue:t.amount,"onUpdate:modelValue":s[2]||(s[2]=n=>t.amount=n),placeholder:"0.00"},null,8,["modelValue"])])]),e("div",X,[e("div",Y,[e("div",Z,o(i(a)("withdraw.current")),1),e("div",tt,[e("span",{class:v(t.ac_type==1?"cur":""),onClick:s[3]||(s[3]=n=>t.ac_type=1)},"USDC-ERC20",2),e("span",{class:v([t.ac_type==2?"cur":"","r"]),onClick:s[4]||(s[4]=n=>t.ac_type=2)},"USDT-ERC20",2)])]),e("div",et,[e("div",st,o(i(a)("withdraw.amount")),1),e("div",at,o(t.amount),1)]),e("div",ot,[e("div",dt,o(i(a)("withdraw.fee")),1),e("div",it,o(t.withdraw_fee),1)]),e("div",nt,[e("div",rt,o(i(a)("withdraw.total")),1),e("div",lt,o(t.total_amount),1)])]),e("div",_t,[e("div",ct,[e("div",wt,o(i(a)("withdraw.pin")),1),e("div",ht,[_(r,{type:"password",class:"account",modelValue:t.security,"onUpdate:modelValue":s[5]||(s[5]=n=>t.security=n),placeholder:i(a)("withdraw.pin_tip")},null,8,["modelValue","placeholder"])])]),e("div",ut,[_(x,{class:"btn",type:"theme",loading:t.loading,onClick:s[6]||(s[6]=n=>b())},{default:I(()=>[E(o(i(a)("withdraw.submit")),1)]),_:1},8,["loading"])]),e("div",mt,[t.ac_type==0?(u(),w("div",ft,o(i(a)("withdraw.erc_fee",{fee:t.erc_fee})),1)):(u(),w("div",pt,o(i(a)("withdraw.trc_fee",{fee:t.trc_fee})),1))])])])])])])}}},xt=g(vt,[["__scopeId","data-v-7a914238"]]);export{xt as default};
