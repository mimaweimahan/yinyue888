import{_ as x,i as C,d as F,P as f,r as I,e as k,a as T,f as e,g as _,l as v,t as o,u as i,B as u,C as w,h as b,w as U,F as $,K as D,q as N,b as S,D as V,y as r,Q as B,x as M}from"./index-D9ZUrC8f.js";const R={class:"page-wrapper"},q={class:"page-wrapper-body"},z={class:"page-wrapper-header"},A={class:"title"},E={class:"withdraw"},W={class:"balance-card"},K={class:"label"},O={class:"value"},P={class:"section"},Q={class:"form-group"},j={class:"label-text"},G={class:"form-control"},H=["placeholder"],J={class:"form-group"},L={class:"label-text"},X={class:"form-control"},Y={class:"hint"},Z={class:"net-switch"},tt={class:"label"},et={class:"chips"},st={class:"summary-bar"},at={class:"summary-item"},ot={class:"s-label"},it={class:"s-value"},dt={class:"summary-item"},nt={class:"s-label"},rt={class:"s-value"},lt={class:"summary-item"},ct={class:"s-label"},_t={class:"s-value"},ut={class:"form-group"},wt={class:"label-text"},ht={class:"form-control"},mt=["placeholder"],pt={class:"btns"},ft={class:"tips"},vt={class:"tit"},bt={__name:"Withdraw",setup(yt){const h=N(),{t:a}=C.global,t=F({loading:!1,address_withdraw:"",erc_fee:0,trc_fee:0,amount:"",security:"",ac_type:1,withdraw_fee:0,withdraw_min:1,withdraw_max:1,total_amount:0,userInfo:{balance:0}});f(()=>t.amount,d=>{t.ac_type==2?t.withdraw_fee=t.erc_fee/100:t.withdraw_fee=t.trc_fee/100;let s=parseFloat(d);s>0&&(t.withdraw_fee=(s*t.withdraw_fee).toFixed(2),t.total_amount=(s-t.withdraw_fee).toFixed(2))}),f(()=>t.ac_type,d=>{d==2?t.withdraw_fee=t.erc_fee/100:t.withdraw_fee=t.trc_fee/100,parseFloat(t.amount)>0&&(t.withdraw_fee=(parseFloat(t.amount)*t.withdraw_fee).toFixed(2),t.total_amount=(parseFloat(t.amount)-t.withdraw_fee).toFixed(2))}),I(!1);const m=()=>{D().then(d=>{t.userInfo=d.data,t.address_withdraw=d.data.address_withdraw,t.erc_fee=d.data.withdraw_erc_fee*100,t.trc_fee=d.data.withdraw_trc_fee*100,t.withdraw_min=parseInt(d.data.withdraw_min),t.withdraw_max=parseInt(d.data.withdraw_max)}).catch(d=>{console.log(d)})},y=()=>{h.push("/user")},p=d=>{const s=parseFloat(d||0);return Number.isNaN(s)?"0.00":s.toFixed(2)},g=()=>{let d=parseFloat(t.userInfo.balance),s=parseFloat(t.amount);if(!s)return r(a("serverCodes.817")),!1;if(s>d)return r(a("serverCodes.819")),!1;if(s<t.withdraw_min)return r(a("serverCodes.822")),!1;if(s>t.withdraw_max)return r(a("serverCodes.823")),!1;if(!t.security)return r(a("serverCodes.828")),!1;let c={amount:s,address:t.address_withdraw,ac_type:t.ac_type,security:t.security};t.loading=!0,B(c).then(l=>{M(l.msg),t.amount=0,t.security="",m(),t.loading=!1,h.push("/user")}).catch(l=>{t.loading=!1,r({message:l.msg,duration:5e3})})};return k(()=>{m()}),(d,s)=>{const c=v("van-icon"),l=v("van-button");return S(),T("div",R,[s[9]||(s[9]=e("div",{class:"page-bg"},null,-1)),s[10]||(s[10]=e("div",{class:"page-mask"},null,-1)),e("div",q,[e("section",z,[_(c,{name:"arrow-left",class:"icon-box",size:"18",onClick:s[0]||(s[0]=n=>y())}),e("div",A,[e("span",null,o(i(a)("mine.withdraw")),1)])]),e("article",E,[e("div",W,[e("div",K,o(i(a)("mine.available"))+" (USD)",1),e("div",O,o(p(t.userInfo.balance)),1)]),e("div",P,[e("div",Q,[e("div",j,o(i(a)("withdraw.address")),1),e("div",G,[u(e("input",{class:"base-input",type:"text","onUpdate:modelValue":s[1]||(s[1]=n=>t.address_withdraw=n),placeholder:i(a)("mine.enter_address"),readonly:""},null,8,H),[[w,t.address_withdraw]])])]),e("div",J,[e("div",L,o(i(a)("withdraw.quantity")),1),e("div",X,[u(e("input",{class:"base-input",type:"number",inputmode:"decimal",step:"0.01","onUpdate:modelValue":s[2]||(s[2]=n=>t.amount=n),placeholder:"0.00"},null,512),[[w,t.amount]])]),e("div",Y,o(i(a)("withdraw.amount"))+" · "+o(i(a)("mine.available"))+" $"+o(p(t.userInfo.balance)),1)]),e("div",Z,[e("span",tt,o(i(a)("withdraw.current")),1),e("div",et,[e("button",{class:b({active:t.ac_type===1}),onClick:s[3]||(s[3]=n=>t.ac_type=1)},"USDT-ERC20",2),e("button",{class:b({active:t.ac_type===2}),onClick:s[4]||(s[4]=n=>t.ac_type=2)},"USDT-TRC20",2)])]),e("div",st,[e("div",at,[e("div",ot,o(i(a)("withdraw.amount")),1),e("div",it,"$"+o(t.amount||"0.00"),1)]),s[6]||(s[6]=e("div",{class:"divider"},null,-1)),e("div",dt,[e("div",nt,o(i(a)("withdraw.fee")),1),e("div",rt,"$"+o(t.withdraw_fee||"0.00"),1)]),s[7]||(s[7]=e("div",{class:"divider"},null,-1)),e("div",lt,[e("div",ct,o(i(a)("withdraw.total")),1),e("div",_t,"$"+o(t.total_amount||"0.00"),1)])]),e("div",ut,[e("div",wt,o(i(a)("withdraw.pin")),1),e("div",ht,[u(e("input",{class:"base-input",type:"password","onUpdate:modelValue":s[5]||(s[5]=n=>t.security=n),placeholder:i(a)("withdraw.pin_tip")},null,8,mt),[[w,t.security]])])]),e("div",pt,[_(l,{class:"btn",type:"theme",block:"",loading:t.loading,onClick:g},{default:U(()=>[V(o(i(a)("withdraw.submit")),1)]),_:1},8,["loading"])]),e("div",ft,[e("span",vt,o(t.ac_type===2?i(a)("withdraw.erc_fee",{fee:t.erc_fee}):i(a)("withdraw.trc_fee",{fee:t.trc_fee})),1),e("p",null,o(i(a)("recharge.alarm_desc")),1),e("p",null,o(i(a)("recharge.alarm_desc2")),1),e("p",null,o(i(a)("withdraw.amount"))+" ≥ "+o(t.withdraw_min)+" ，≤ "+o(t.withdraw_max),1)])])]),s[8]||(s[8]=e("div",{class:"ft-h"},null,-1)),_($,{active:"user"})])])}}},xt=x(bt,[["__scopeId","data-v-37b2e41d"]]);export{xt as default};
