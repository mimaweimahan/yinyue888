import{_ as N,I as B,i as I,r as l,c as L,d as M,P as V,e as q,a4 as z,a as v,f as a,g as _,l as g,t as n,u as r,w as b,B as Q,C as $,z as E,A as K,F as P,q as j,b as y,D as k,a5 as G,M as m,a6 as H,a7 as J}from"./index-D9ZUrC8f.js";import{Q as O}from"./browser-COI8Ulb7.js";const W={class:"page-wrapper"},X={class:"page-wrapper-body"},Y={class:"page-wrapper-header"},Z={class:"title"},ss={class:"recharge"},es={class:"balance-card"},as={class:"balance-info"},ts={class:"label"},ns={class:"value"},os={class:"section"},rs={class:"recharge-form"},cs={class:"form-group"},ds={class:"label-text"},ls={class:"form-control"},is=["placeholder"],us={class:"preset-grid"},_s=["onClick"],ps={class:"btns"},ms={class:"tips"},hs={class:"tit"},fs={class:"lab"},vs={__name:"Recharge",setup(gs){const h=B(),{t:o}=I.global,f=j(),i=l(null),w=()=>{f.push("/user")},x=()=>{f.push("/records")},S=L(()=>h.userInfo?.balance||0),C=e=>{const t=parseFloat(e||0);return Number.isNaN(t)?"0.00":t.toFixed(2)},U=[10,20,50,100,200,500,1e3,2e3,5e3,1e4,2e4,5e4],T=e=>{s.amount=String(e),G(()=>{i.value&&i.value.focus&&i.value.focus()})};h.userInfo;const D=l([]);l(!1),l(!1),l(!1);const s=M({list:[],currency:[],fileList:[],net:"",currency_name:",",address:"",qrCodeUrl:"",tips:"",address_type:"",transaction_hash:"",transfer_screenshot:"",amount:""}),A=e=>{s.address=e.address,e.currency?(s.currency=e.currency,s.address=e.currency[0].address,s.currency_name=e.currency[0].name):(s.currency=[],s.currency_name=e.name),s.address_type=e.name,s.net=e.name};V(()=>s.address,()=>{s.address&&O.toDataURL(s.address,{width:200,margin:2}).then(e=>{s.qrCodeUrl=e})});const R=()=>{const e=String(s.amount||"").trim();if(!e)return m(o("recharge.amount_tip"));const t=s.address_type||s.currency_name||"USDT",d=s.currency_name||"USDT",c={address:s.address||"manual",address_type:t,symbol:d,amount:e,transaction_hash:s.transaction_hash||"manual",transfer_screenshot:s.transfer_screenshot||""};H(c).then(u=>{s.transaction_hash="",s.transfer_screenshot="",D.value=[],m(u.msg),setTimeout(()=>F(),800)}).catch(u=>{m(u.msg||"Submit failed")})},F=async()=>{try{const t=(await J({}))?.data||{},d=t.url||t.kf_url||t.customer_service||t.top_kf||"/index/user/kfindex";window.open(d,"_blank")}catch{window.open("/index/user/kfindex","_blank")}};return q(()=>{z().then(e=>{const t=e?.data?.data||e?.data?.list||[];s.list=t,s.tips=e?.data?.tips||"",t&&t.length?A(t[0]):(s.address=e?.data?.address||"",s.address_type=e?.data?.address_type||e?.data?.symbol||"USDT",s.currency_name=e?.data?.currency_name||e?.data?.symbol||"USDT")}).catch(e=>{console.log(e)})}),(e,t)=>{const d=g("van-icon"),p=g("van-button");return y(),v("div",W,[t[3]||(t[3]=a("div",{class:"page-bg"},null,-1)),t[4]||(t[4]=a("div",{class:"page-mask"},null,-1)),a("div",X,[a("section",Y,[_(d,{name:"arrow-left",class:"icon-box",size:"18",onClick:t[0]||(t[0]=c=>w())}),a("div",Z,[a("span",null,n(r(o)("mine.recharge")),1)])]),a("article",ss,[a("div",es,[a("div",as,[a("div",ts,n(r(o)("mine.available"))+" (USD)",1),a("div",ns,n(C(S.value)),1)]),_(p,{size:"small",class:"record-btn",onClick:x},{default:b(()=>[k(n(r(o)("mine.records")),1)]),_:1})]),a("div",os,[a("div",rs,[a("div",cs,[a("div",ds,n(r(o)("recharge.amount")),1),a("div",ls,[Q(a("input",{ref_key:"amountRef",ref:i,class:"amount-input",type:"number",inputmode:"decimal",pattern:"[0-9]*",step:"0.01","onUpdate:modelValue":t[1]||(t[1]=c=>s.amount=c),placeholder:r(o)("recharge.amount_tip"),autocomplete:"off"},null,8,is),[[$,s.amount]])])]),a("div",us,[(y(),v(E,null,K(U,c=>a("button",{key:c,type:"button",class:"preset-btn",onClick:u=>T(c)},n(c),9,_s)),64))])]),a("div",ps,[_(p,{class:"btn",type:"theme",block:"",onClick:R},{default:b(()=>[k(n(r(o)("recharge.submit_for_review")),1)]),_:1})]),a("div",ms,[a("span",hs,n(r(o)("recharge.alarm",{unit:s.currency_name})),1),a("div",fs,[a("p",null,n(s.tips),1),a("p",null,n(r(o)("recharge.alarm_desc")),1),a("p",null,n(r(o)("recharge.alarm_desc2")),1)])])])]),t[2]||(t[2]=a("div",{class:"ft-h"},null,-1)),_(P,{active:"user"})])])}}},ks=N(vs,[["__scopeId","data-v-f5c97c25"]]);export{ks as default};
