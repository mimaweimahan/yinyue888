import{i as k,r as g,I as S,d as U,U as B,R,w as u,u as s,q as T,l as L,b as P,f as a,g as i,S as I,t as r,D as w,y as p,V as N,M as A}from"./index-D9ZUrC8f.js";import{B as D,a as d,b as $,C as q,T as F}from"./TopIcons-ciWpU0mb.js";const M={class:"uni-input-wrapper"},O={class:"label-text"},j={class:"uni-input-wrapper"},z={class:"label-text"},E={class:"uni-input-wrapper"},G={class:"label-text"},H={class:"uni-input-wrapper"},J={class:"label-text"},K={class:"uni-input-wrapper"},Q={class:"label-text"},W={class:"uni-input-wrapper"},X={class:"label-text"},Y={class:"form_btn"},Z={class:"regLink"},ee={class:"regTip"},te={__name:"Signup",setup(oe){const{t:e}=k.global,v=T(),b=B(),c=g(!1),_=g("AC +1"),m=g(!1),h=S(),o=U({email:"",phone:"",country_code:"1",password:"",password2:"",tranpass:"",invite:b.query.code}),V=()=>{m.value=!0};function x(n){_.value=n.abbreviation+" +"+n.code,o.country_code=n.code}const f=n=>{window.location.href=n},y=()=>{if(!o.email)return p(e("login.email_tip")),!1;if(!o.phone)return p(e("login.mobile_tip")),!1;if(!o.password)return p(e("login.password_tip")),!1;if(!o.password2)return p(e("login.cpassword_tip")),!1;if(!o.tranpass)return p(e("serverCodes.820")),!1;if(!o.invite)return p(e("login.invite_tip")),!1;if(o.password!=o.password2)return p(e("serverCodes.803")),!1;c.value=!0,N(o).then(n=>{c.value=!1,console.log(n.msg),A(n.msg),h.login(n.data.userInfo,n.data.token),v.push("/")}).catch(n=>{console.log(n),c.value=!1,p(n.msg)})};return(n,l)=>{const C=L("RouterLink");return P(),R(D,{title:s(e)("login.signuptext"),subtitle:s(e)("login.signuptext"),desc:"Create an account to access more content"},{top:u(()=>[i(F,{onServer:l[0]||(l[0]=t=>f("/index/user/kfindex")),onLang:l[1]||(l[1]=t=>f("/lang")),onDownload:l[2]||(l[2]=t=>f("/download"))})]),default:u(()=>[a("form",{class:"login-form",autocomplete:"off",onSubmit:I(y,["prevent"])},[a("div",M,[a("label",O,r(s(e)("login.email")),1),i(d,{modelValue:o.email,"onUpdate:modelValue":l[3]||(l[3]=t=>o.email=t),placeholder:s(e)("login.email_tip")},null,8,["modelValue","placeholder"])]),a("div",j,[a("label",z,r(s(e)("login.mobile")),1),i(d,{modelValue:o.phone,"onUpdate:modelValue":l[4]||(l[4]=t=>o.phone=t),placeholder:s(e)("login.mobile_tip"),prefix:_.value,"prefix-clickable":!0,onPrefixClick:V},null,8,["modelValue","placeholder","prefix"])]),a("div",E,[a("label",G,r(s(e)("login.password")),1),i(d,{modelValue:o.password,"onUpdate:modelValue":l[5]||(l[5]=t=>o.password=t),type:"password",autocomplete:"off",placeholder:s(e)("login.password_tip")},null,8,["modelValue","placeholder"])]),a("div",H,[a("label",J,r(s(e)("login.cpassword")),1),i(d,{modelValue:o.password2,"onUpdate:modelValue":l[6]||(l[6]=t=>o.password2=t),type:"password",autocomplete:"off",placeholder:s(e)("login.password_tip")},null,8,["modelValue","placeholder"])]),a("div",K,[a("label",Q,r(s(e)("login.tranpass")),1),i(d,{modelValue:o.tranpass,"onUpdate:modelValue":l[7]||(l[7]=t=>o.tranpass=t),placeholder:s(e)("login.tranpass_tip")},null,8,["modelValue","placeholder"])]),a("div",W,[a("label",X,r(s(e)("login.invite")),1),i(d,{modelValue:o.invite,"onUpdate:modelValue":l[8]||(l[8]=t=>o.invite=t),placeholder:s(e)("login.invite_tip")},null,8,["modelValue","placeholder"])]),a("div",Y,[i($,{"native-type":"submit"},{default:u(()=>[w(r(s(e)("login.signup")),1)]),_:1})]),a("div",Z,[a("span",ee,r(s(e)("login.have")),1),i(C,{to:"/login"},{default:u(()=>[w(r(s(e)("login.login_now")),1)]),_:1})])],32),i(q,{show:m.value,"onUpdate:show":l[9]||(l[9]=t=>m.value=t),code:o.country_code,onOnCountrySelect:x},null,8,["show","code"])]),_:1},8,["title","subtitle"])}}};export{te as default};
