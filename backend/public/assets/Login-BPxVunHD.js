import{i as S,r as y,I as T,d as L,R as $,w as d,u as n,q as P,l as U,b as r,f as a,g as u,a as c,t as i,S as A,D as _,M as g,T as I,y as N}from"./index-D9ZUrC8f.js";import{B as R,a as w,b as D,C as F,T as M}from"./TopIcons-ciWpU0mb.js";const q={class:"switch-type"},E={key:0,class:"uni-input-wrapper"},O={class:"label-text"},j={key:1,class:"uni-input-wrapper"},z={class:"label-text"},G={class:"uni-input-wrapper"},H={class:"label-text"},J={class:"form_btn"},K={class:"regLink"},Y={__name:"Login",setup(Q){const{t}=S.global,b=y("AC +1"),m=y(!1),p=y(!1),x=T(),f=P(),e=L({ac_type:1,account:"",password:"",country_code:"1"}),k=l=>{e.ac_type=l},C=()=>{m.value=!0},v=l=>{f.push(l)};function h(l){b.value=l.abbreviation+" +"+l.code,e.country_code=l.code}function V(){if(!e.account&&e.ac_type==1)return g(t("login.mobile_tip")),!1;if(!e.account&&e.ac_type==2)return g(t("login.email_tip")),!1;if(!e.password)return g(t("login.password_tip")),!1;p.value=!0,I(e).then(l=>{g(l.msg),x.login(l.data.userInfo,l.data.token),p.value=!1,f.push("/")}).catch(l=>{console.log(l),p.value=!1,N(l.msg)})}return(l,o)=>{const B=U("RouterLink");return r(),$(R,{title:n(t)("login.logintext")},{top:d(()=>[u(M,{class:"top-icons-lg",onServer:o[0]||(o[0]=s=>v("/index/user/kfindex")),onLang:o[1]||(o[1]=s=>n(f).push("/lang")),onDownload:o[2]||(o[2]=s=>v("/download"))})]),default:d(()=>[a("div",q,[e.ac_type===1?(r(),c("span",{key:0,onClick:o[3]||(o[3]=s=>k(2))},i(n(t)("login.loginemail")),1)):(r(),c("span",{key:1,onClick:o[4]||(o[4]=s=>k(1))},i(n(t)("login.loginmobile")),1))]),a("form",{class:"login-form",autocomplete:"off",onSubmit:A(V,["prevent"])},[e.ac_type===1?(r(),c("div",E,[a("label",O,i(n(t)("login.mobile")),1),u(w,{modelValue:e.account,"onUpdate:modelValue":o[5]||(o[5]=s=>e.account=s),placeholder:n(t)("login.mobile_tip"),prefix:b.value,"prefix-clickable":!0,onPrefixClick:C},null,8,["modelValue","placeholder","prefix"])])):(r(),c("div",j,[a("label",z,i(n(t)("login.email")),1),u(w,{modelValue:e.account,"onUpdate:modelValue":o[6]||(o[6]=s=>e.account=s),placeholder:n(t)("login.email_tip")},null,8,["modelValue","placeholder"])])),a("div",G,[a("label",H,[a("span",null,i(n(t)("login.password")),1),a("span",{class:"tip",onClick:o[7]||(o[7]=s=>v("/password"))},i(n(t)("login.forgot")),1)]),u(w,{modelValue:e.password,"onUpdate:modelValue":o[8]||(o[8]=s=>e.password=s),type:"password",placeholder:n(t)("login.password_tip"),"toggle-password":!0},null,8,["modelValue","placeholder"])]),a("div",J,[u(D,{class:"login-3d-btn","native-type":"submit",loading:p.value},{default:d(()=>[_(i(n(t)("login.logintext")),1)]),_:1},8,["loading"])]),a("div",K,[_(i(n(t)("login.donthave"))+" ",1),u(B,{to:"/signup"},{default:d(()=>[_(i(n(t)("login.signuptext")),1)]),_:1})])],32),u(F,{show:m.value,"onUpdate:show":o[9]||(o[9]=s=>m.value=s),code:e.country_code,onOnCountrySelect:h},null,8,["show","code"])]),_:1},8,["title"])}}};export{Y as default};
